# CDCP Staging Environment Variables
# ==========================================
# このファイルをコピーして .env.staging を作成してください
# 機密情報は必ず .gitignore に追加されていることを確認してください

# --- Application ---
NODE_ENV=staging
PORT=3000
API_BASE_URL=https://staging-api.cdcp.example.com

# --- Database (RDS PostgreSQL) ---
DATABASE_URL=postgresql://cdcp_staging:CHANGE_ME@cdcp-staging-db.xxxxx.ap-northeast-1.rds.amazonaws.com:5432/cdcp_staging
DATABASE_HOST=cdcp-staging-db.xxxxx.ap-northeast-1.rds.amazonaws.com
DATABASE_PORT=5432
DATABASE_NAME=cdcp_staging
DATABASE_USER=cdcp_staging
DATABASE_PASSWORD=CHANGE_ME
DATABASE_SSL=true
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# --- Redis (ElastiCache) ---
REDIS_URL=redis://cdcp-staging-redis.xxxxx.cache.amazonaws.com:6379
REDIS_HOST=cdcp-staging-redis.xxxxx.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_TLS=false

# --- AWS Services ---
AWS_REGION=ap-northeast-1
AWS_ACCOUNT_ID=123456789012

# S3 Bucket
S3_BUCKET_NAME=cdcp-staging-photos
S3_BUCKET_REGION=ap-northeast-1
S3_PUBLIC_URL=https://d1234567890abcdef.cloudfront.net

# ECR
ECR_REPOSITORY=cdcp-staging
ECR_IMAGE_TAG=latest

# CloudFront
CLOUDFRONT_DISTRIBUTION_ID=E1234567890ABC
CLOUDFRONT_DOMAIN=d1234567890abcdef.cloudfront.net

# --- Authentication (Auth0) ---
AUTH0_DOMAIN=cdcp-staging.us.auth0.com
AUTH0_CLIENT_ID=CHANGE_ME
AUTH0_CLIENT_SECRET=CHANGE_ME
AUTH0_AUDIENCE=https://staging-api.cdcp.example.com
AUTH0_CALLBACK_URL=https://staging.cdcp.example.com/callback
AUTH0_LOGOUT_URL=https://staging.cdcp.example.com

# JWT
JWT_SECRET=CHANGE_ME_RANDOM_STRING_64_CHARS_MIN
JWT_EXPIRATION=24h
JWT_ALGORITHM=HS256

# --- Monitoring & Logging ---

# Datadog
DATADOG_API_KEY=CHANGE_ME
DATADOG_APP_KEY=CHANGE_ME
DATADOG_SITE=datadoghq.com
DATADOG_ENV=staging

# Sentry
SENTRY_DSN=https://xxxxx@xxxxx.ingest.sentry.io/xxxxx
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=1.0

# --- File Upload ---
MAX_FILE_SIZE=10485760  # 10MB
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/heif,application/pdf

# --- Email (SES) ---
SES_REGION=ap-northeast-1
SES_FROM_EMAIL=noreply@cdcp.example.com
SES_REPLY_TO_EMAIL=support@cdcp.example.com

# --- Feature Flags ---
FEATURE_GPS_ENABLED=true
FEATURE_OFFLINE_MODE=true
FEATURE_CALS_EC_EXPORT=false  # Phase2で有効化

# --- Security ---
CORS_ORIGIN=https://staging.cdcp.example.com
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000  # 1分

# --- Logging ---
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_TIMESTAMP=true

# --- Session ---
SESSION_SECRET=CHANGE_ME_RANDOM_STRING_64_CHARS_MIN
SESSION_TIMEOUT=1800000  # 30分（ミリ秒）

# --- CALS/EC Settings (Phase2+) ---
CALS_EC_ENABLED=false
CALS_EC_SCHEMA_VERSION=1.0
CALS_EC_CERTIFICATE_PATH=/secrets/cals-ec-cert.pem

# --- Cost Tracking ---
COST_CENTER=staging
BILLING_TAG=cdcp-staging
